--
-- PostgreSQL database dump
--

\restrict K5bKKmJmtQUQwPFwTFW29d2MjmDu6stg7XxeRotFb6cUAdBWyDCaMlbk2unlNWI

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.6

-- Started on 2025-12-11 19:15:24

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 33092)
-- Name: auditoria; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA auditoria;


ALTER SCHEMA auditoria OWNER TO postgres;

--
-- TOC entry 236 (class 1255 OID 33093)
-- Name: fn_log_audit(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_log_audit() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
  IF (TG_OP = 'DELETE') THEN
    INSERT INTO auditoria.tb_auditoria (tabla_aud, operacion_aud, valoranterior_aud, valornuevo_aud, fecha_aud, usuario_aud)
    VALUES (TG_TABLE_NAME, 'D', row_to_json(OLD), NULL, now(), current_user);
    RETURN OLD;

  ELSIF (TG_OP = 'UPDATE') THEN
    INSERT INTO auditoria.tb_auditoria (tabla_aud, operacion_aud, valoranterior_aud, valornuevo_aud, fecha_aud, usuario_aud)
    VALUES (TG_TABLE_NAME, 'U', row_to_json(OLD), row_to_json(NEW), now(), current_user);
    RETURN NEW;

  ELSIF (TG_OP = 'INSERT') THEN
    INSERT INTO auditoria.tb_auditoria (tabla_aud, operacion_aud, valoranterior_aud, valornuevo_aud, fecha_aud, usuario_aud)
    VALUES (TG_TABLE_NAME, 'I', NULL, row_to_json(NEW), now(), current_user);
    RETURN NEW;
  END IF;

  RETURN NULL;
END;
$$;


ALTER FUNCTION public.fn_log_audit() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 218 (class 1259 OID 33094)
-- Name: tb_auditoria; Type: TABLE; Schema: auditoria; Owner: postgres
--

CREATE TABLE auditoria.tb_auditoria (
    id_aud integer NOT NULL,
    tabla_aud text,
    operacion_aud text,
    valoranterior_aud text,
    valornuevo_aud text,
    fecha_aud timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    usuario_aud text,
    esquema_aud text,
    activar_aud boolean,
    trigger_aud boolean
);


ALTER TABLE auditoria.tb_auditoria OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 33100)
-- Name: tb_auditoria_id_aud_seq; Type: SEQUENCE; Schema: auditoria; Owner: postgres
--

CREATE SEQUENCE auditoria.tb_auditoria_id_aud_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE auditoria.tb_auditoria_id_aud_seq OWNER TO postgres;

--
-- TOC entry 4896 (class 0 OID 0)
-- Dependencies: 219
-- Name: tb_auditoria_id_aud_seq; Type: SEQUENCE OWNED BY; Schema: auditoria; Owner: postgres
--

ALTER SEQUENCE auditoria.tb_auditoria_id_aud_seq OWNED BY auditoria.tb_auditoria.id_aud;


--
-- TOC entry 220 (class 1259 OID 33101)
-- Name: mensajes_navidad; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.mensajes_navidad (
    id integer NOT NULL,
    nombre character varying(80) NOT NULL,
    mensaje text NOT NULL,
    fecha timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    aprobado boolean DEFAULT false
);


ALTER TABLE public.mensajes_navidad OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 33108)
-- Name: mensajes_navidad_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.mensajes_navidad_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.mensajes_navidad_id_seq OWNER TO postgres;

--
-- TOC entry 4897 (class 0 OID 0)
-- Dependencies: 221
-- Name: mensajes_navidad_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.mensajes_navidad_id_seq OWNED BY public.mensajes_navidad.id;


--
-- TOC entry 222 (class 1259 OID 33109)
-- Name: tb_estadocivil; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_estadocivil (
    id_est integer NOT NULL,
    descripcion_est character varying(20) NOT NULL
);


ALTER TABLE public.tb_estadocivil OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 33112)
-- Name: tb_estadocivil_id_est_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_estadocivil_id_est_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_estadocivil_id_est_seq OWNER TO postgres;

--
-- TOC entry 4898 (class 0 OID 0)
-- Dependencies: 223
-- Name: tb_estadocivil_id_est_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_estadocivil_id_est_seq OWNED BY public.tb_estadocivil.id_est;


--
-- TOC entry 224 (class 1259 OID 33113)
-- Name: tb_galeria; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_galeria (
    id_galeria integer NOT NULL,
    carrera character varying(100) NOT NULL,
    descripcion text NOT NULL,
    imagen character varying(300) NOT NULL
);


ALTER TABLE public.tb_galeria OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 33118)
-- Name: tb_galeria_id_galeria_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_galeria_id_galeria_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_galeria_id_galeria_seq OWNER TO postgres;

--
-- TOC entry 4899 (class 0 OID 0)
-- Dependencies: 225
-- Name: tb_galeria_id_galeria_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_galeria_id_galeria_seq OWNED BY public.tb_galeria.id_galeria;


--
-- TOC entry 226 (class 1259 OID 33119)
-- Name: tb_pagina; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_pagina (
    id_pag integer NOT NULL,
    descripcion_pag text NOT NULL,
    path_pag text NOT NULL
);


ALTER TABLE public.tb_pagina OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 33124)
-- Name: tb_pagina_id_pag_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_pagina_id_pag_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_pagina_id_pag_seq OWNER TO postgres;

--
-- TOC entry 4900 (class 0 OID 0)
-- Dependencies: 227
-- Name: tb_pagina_id_pag_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_pagina_id_pag_seq OWNED BY public.tb_pagina.id_pag;


--
-- TOC entry 228 (class 1259 OID 33125)
-- Name: tb_perfil; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_perfil (
    id_per integer NOT NULL,
    descripcion_per character varying(50) NOT NULL
);


ALTER TABLE public.tb_perfil OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 33128)
-- Name: tb_perfil_id_per_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_perfil_id_per_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_perfil_id_per_seq OWNER TO postgres;

--
-- TOC entry 4901 (class 0 OID 0)
-- Dependencies: 229
-- Name: tb_perfil_id_per_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_perfil_id_per_seq OWNED BY public.tb_perfil.id_per;


--
-- TOC entry 230 (class 1259 OID 33129)
-- Name: tb_perfilpagina; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_perfilpagina (
    id_perpag integer NOT NULL,
    id_per integer NOT NULL,
    id_pag integer NOT NULL
);


ALTER TABLE public.tb_perfilpagina OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 33132)
-- Name: tb_perfilpagina_id_perpag_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_perfilpagina_id_perpag_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_perfilpagina_id_perpag_seq OWNER TO postgres;

--
-- TOC entry 4902 (class 0 OID 0)
-- Dependencies: 231
-- Name: tb_perfilpagina_id_perpag_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_perfilpagina_id_perpag_seq OWNED BY public.tb_perfilpagina.id_perpag;


--
-- TOC entry 232 (class 1259 OID 33133)
-- Name: tb_usuario; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_usuario (
    id_us integer NOT NULL,
    id_per integer NOT NULL,
    id_est integer NOT NULL,
    nombre_us text NOT NULL,
    cedula_us character varying(10) NOT NULL,
    correo_us text NOT NULL,
    clave_us text NOT NULL,
    fecha_reg timestamp without time zone DEFAULT now(),
    activo boolean DEFAULT true
);


ALTER TABLE public.tb_usuario OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 33140)
-- Name: tb_usuario_id_us_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_usuario_id_us_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_usuario_id_us_seq OWNER TO postgres;

--
-- TOC entry 4903 (class 0 OID 0)
-- Dependencies: 233
-- Name: tb_usuario_id_us_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_usuario_id_us_seq OWNED BY public.tb_usuario.id_us;


--
-- TOC entry 234 (class 1259 OID 33141)
-- Name: tb_voto; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tb_voto (
    id_voto integer NOT NULL,
    id_usuario integer NOT NULL,
    id_galeria integer NOT NULL,
    fecha_voto timestamp without time zone DEFAULT now()
);


ALTER TABLE public.tb_voto OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 33145)
-- Name: tb_voto_id_voto_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tb_voto_id_voto_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tb_voto_id_voto_seq OWNER TO postgres;

--
-- TOC entry 4904 (class 0 OID 0)
-- Dependencies: 235
-- Name: tb_voto_id_voto_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tb_voto_id_voto_seq OWNED BY public.tb_voto.id_voto;


--
-- TOC entry 4683 (class 2604 OID 33146)
-- Name: tb_auditoria id_aud; Type: DEFAULT; Schema: auditoria; Owner: postgres
--

ALTER TABLE ONLY auditoria.tb_auditoria ALTER COLUMN id_aud SET DEFAULT nextval('auditoria.tb_auditoria_id_aud_seq'::regclass);


--
-- TOC entry 4685 (class 2604 OID 33147)
-- Name: mensajes_navidad id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mensajes_navidad ALTER COLUMN id SET DEFAULT nextval('public.mensajes_navidad_id_seq'::regclass);


--
-- TOC entry 4688 (class 2604 OID 33148)
-- Name: tb_estadocivil id_est; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_estadocivil ALTER COLUMN id_est SET DEFAULT nextval('public.tb_estadocivil_id_est_seq'::regclass);


--
-- TOC entry 4689 (class 2604 OID 33149)
-- Name: tb_galeria id_galeria; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_galeria ALTER COLUMN id_galeria SET DEFAULT nextval('public.tb_galeria_id_galeria_seq'::regclass);


--
-- TOC entry 4690 (class 2604 OID 33150)
-- Name: tb_pagina id_pag; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_pagina ALTER COLUMN id_pag SET DEFAULT nextval('public.tb_pagina_id_pag_seq'::regclass);


--
-- TOC entry 4691 (class 2604 OID 33151)
-- Name: tb_perfil id_per; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_perfil ALTER COLUMN id_per SET DEFAULT nextval('public.tb_perfil_id_per_seq'::regclass);


--
-- TOC entry 4692 (class 2604 OID 33152)
-- Name: tb_perfilpagina id_perpag; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_perfilpagina ALTER COLUMN id_perpag SET DEFAULT nextval('public.tb_perfilpagina_id_perpag_seq'::regclass);


--
-- TOC entry 4693 (class 2604 OID 33153)
-- Name: tb_usuario id_us; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_usuario ALTER COLUMN id_us SET DEFAULT nextval('public.tb_usuario_id_us_seq'::regclass);


--
-- TOC entry 4696 (class 2604 OID 33154)
-- Name: tb_voto id_voto; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_voto ALTER COLUMN id_voto SET DEFAULT nextval('public.tb_voto_id_voto_seq'::regclass);


--
-- TOC entry 4873 (class 0 OID 33094)
-- Dependencies: 218
-- Data for Name: tb_auditoria; Type: TABLE DATA; Schema: auditoria; Owner: postgres
--

COPY auditoria.tb_auditoria (id_aud, tabla_aud, operacion_aud, valoranterior_aud, valornuevo_aud, fecha_aud, usuario_aud, esquema_aud, activar_aud, trigger_aud) FROM stdin;
1	tb_perfil	\N	\N	\N	2025-11-30 22:55:02.042821	\N	public	\N	t
2	mensajes_navidad	\N	\N	\N	2025-11-30 22:55:02.042821	\N	public	\N	f
3	tb_estadocivil	\N	\N	\N	2025-11-30 22:55:02.042821	\N	public	\N	t
4	tb_usuario	\N	\N	\N	2025-11-30 22:55:02.042821	\N	public	\N	t
5	tb_perfilpagina	\N	\N	\N	2025-11-30 22:55:02.042821	\N	public	\N	t
6	tb_pagina	\N	\N	\N	2025-11-30 22:55:02.042821	\N	public	\N	t
7	tb_usuario	U	{"id_us":6,"id_per":2,"id_est":2,"nombre_us":"Atun","cedula_us":"0987654321","correo_us":"a@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:19:36.56238","activo":false}	{"id_us":6,"id_per":2,"id_est":2,"nombre_us":"Atun","cedula_us":"0987654321","correo_us":"a@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:19:36.56238","activo":true}	2025-11-30 23:08:58.96454	postgres	\N	\N	\N
8	mensajes_navidad	I	\N	{"id":5,"nombre":"nicole","mensaje":"feliz navidad feliz anvida","fecha":"2025-11-30T23:48:41.675604"}	2025-11-30 23:48:41.675604	postgres	\N	\N	\N
9	mensajes_navidad	U	{"id":5,"nombre":"nicole","mensaje":"feliz navidad feliz anvida","fecha":"2025-11-30T23:48:41.675604"}	{"id":5,"nombre":"nicole","mensaje":"feliz navidad feliz navidad","fecha":"2025-11-30T23:48:41.675604"}	2025-12-01 14:58:03.96584	postgres	\N	\N	\N
10	mensajes_navidad	D	{"id":2,"nombre":"Invitado","mensaje":"feliz navidad","fecha":"2025-11-30T04:33:31.369095"}	\N	2025-12-01 15:12:42.27183	postgres	\N	\N	\N
11	mensajes_navidad	D	{"id":3,"nombre":"nicole","mensaje":"feliz naivdiaddd","fecha":"2025-11-30T04:49:50.248044"}	\N	2025-12-01 15:12:45.760693	postgres	\N	\N	\N
12	tb_usuario	I	\N	{"id_us":7,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1","correo_us":"nico.espin7@gmail.com","clave_us":"1","fecha_reg":"2025-12-01T15:34:25.297386","activo":true}	2025-12-01 15:34:25.297386	postgres	\N	\N	\N
13	tb_usuario	I	\N	{"id_us":9,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1122334455","correo_us":"7@gmail.com","clave_us":"12345678","fecha_reg":"2025-12-01T15:42:28.481571","activo":true}	2025-12-01 15:42:28.481571	postgres	\N	\N	\N
14	mensajes_navidad	I	\N	{"id":6,"nombre":"nicole","mensaje":"Bienvenidos","fecha":"2025-12-01T15:43:00.448981"}	2025-12-01 15:43:00.448981	postgres	\N	\N	\N
15	tb_usuario	U	{"id_us":9,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1122334455","correo_us":"7@gmail.com","clave_us":"12345678","fecha_reg":"2025-12-01T15:42:28.481571","activo":true}	{"id_us":9,"id_per":2,"id_est":2,"nombre_us":"nicole","cedula_us":"1122334455","correo_us":"7@gmail.com","clave_us":"12345678","fecha_reg":"2025-12-01T15:42:28.481571","activo":true}	2025-12-01 15:47:35.267996	postgres	\N	\N	\N
16	tb_usuario	I	\N	{"id_us":10,"id_per":2,"id_est":1,"nombre_us":"Atun","cedula_us":"1987654321","correo_us":"ee@gmail.com","clave_us":"1","fecha_reg":"2025-12-01T15:47:52.03973","activo":true}	2025-12-01 15:47:52.03973	postgres	\N	\N	\N
17	tb_usuario	D	{"id_us":10,"id_per":2,"id_est":1,"nombre_us":"Atun","cedula_us":"1987654321","correo_us":"ee@gmail.com","clave_us":"1","fecha_reg":"2025-12-01T15:47:52.03973","activo":true}	\N	2025-12-01 15:48:23.957803	postgres	\N	\N	\N
18	tb_usuario	I	\N	{"id_us":11,"id_per":1,"id_est":1,"nombre_us":"G","cedula_us":"1812345671","correo_us":"e1@gmail.com","clave_us":"12345678","fecha_reg":"2025-12-01T15:51:35.367924","activo":true}	2025-12-01 15:51:35.367924	postgres	\N	\N	\N
19	mensajes_navidad	I	\N	{"id":7,"nombre":"nicole","mensaje":"Bienvenidos a todos","fecha":"2025-12-01T16:34:59.579046"}	2025-12-01 16:34:59.579046	postgres	\N	\N	\N
20	login	I	\N	{usuario:'Nicole', accion:'login'}	2025-12-01 16:56:44.601323	Nicole	\N	\N	\N
21	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-01 16:56:55.168396	Nicole	\N	\N	\N
22	login	I	\N	{usuario:'Nicole', accion:'login'}	2025-12-01 16:57:03.797766	Nicole	\N	\N	\N
23	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 16:57:16.240771	nicole	\N	\N	\N
24	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-01 16:57:19.592281	nicole	\N	\N	\N
25	login	I	\N	{usuario:'Nicole', accion:'login'}	2025-12-01 16:57:26.390781	Nicole	\N	\N	\N
26	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 17:00:04.074884	nicole	\N	\N	\N
27	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-01 17:00:12.857449	nicole	\N	\N	\N
28	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-01 18:43:25.114315	Nicole	\N	\N	\N
29	tb_usuario	I	\N	{"id_us":14,"id_per":2,"id_est":2,"nombre_us":"franciso","cedula_us":"1234123412","correo_us":"f@gmail.com","clave_us":"1234567890","fecha_reg":"2025-12-01T18:46:03.040984","activo":true}	2025-12-01 18:46:03.040984	postgres	\N	\N	\N
30	login	I	\N	{usuario:'franciso', accion:'login'}	2025-12-01 18:47:35.166565	franciso	\N	\N	\N
31	login	U	\N	{usuario:'franciso', accion:'logout'}	2025-12-01 18:51:13.737472	franciso	\N	\N	\N
32	tb_usuario	I	\N	{"id_us":15,"id_per":2,"id_est":2,"nombre_us":"w","cedula_us":"1234567895","correo_us":"n@g","clave_us":"112233445","fecha_reg":"2025-12-01T18:54:20.16053","activo":true}	2025-12-01 18:54:20.16053	postgres	\N	\N	\N
33	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-01 19:08:21.696346	Nicole	\N	\N	\N
34	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 19:08:47.385079	nicole	\N	\N	\N
35	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-01 20:21:45.180472	Nicole	\N	\N	\N
36	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 20:21:51.008041	nicole	\N	\N	\N
37	login	U	\N	{usuario:'null', accion:'logout'}	2025-12-01 21:30:32.475931	\N	\N	\N	\N
38	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 21:30:44.05078	nicole	\N	\N	\N
39	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-01 21:31:19.075843	nicole	\N	\N	\N
40	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-01 21:55:23.218406	Nicole	\N	\N	\N
41	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 22:24:18.121949	nicole	\N	\N	\N
42	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-01 22:25:39.495867	nicole	\N	\N	\N
43	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-01 22:56:52.363935	Nicole	\N	\N	\N
44	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-01 22:57:04.624364	nicole	\N	\N	\N
45	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-01 23:09:06.687595	nicole	\N	\N	\N
46	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-04 19:06:55.109023	Nicole	\N	\N	\N
47	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-04 19:25:41.234365	Nicole	\N	\N	\N
48	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-04 19:25:47.280768	nicole	\N	\N	\N
49	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-04 19:30:25.89313	nicole	\N	\N	\N
50	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-04 19:36:28.616871	Nicole	\N	\N	\N
51	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-04 19:36:37.252403	nicole	\N	\N	\N
52	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-08 06:37:33.329286	Nicole	\N	\N	\N
53	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-08 06:37:39.316335	nicole	\N	\N	\N
54	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-08 06:38:10.503634	nicole	\N	\N	\N
55	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-09 18:21:38.382856	Nicole	\N	\N	\N
56	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-09 18:21:44.812781	nicole	\N	\N	\N
57	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-09 18:21:47.231209	nicole	\N	\N	\N
58	tb_usuario	D	{"id_us":6,"id_per":2,"id_est":2,"nombre_us":"Atun","cedula_us":"0987654321","correo_us":"a@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:19:36.56238","activo":true}	\N	2025-12-09 18:33:28.197628	postgres	\N	\N	\N
59	tb_usuario	D	{"id_us":9,"id_per":2,"id_est":2,"nombre_us":"nicole","cedula_us":"1122334455","correo_us":"7@gmail.com","clave_us":"12345678","fecha_reg":"2025-12-01T15:42:28.481571","activo":true}	\N	2025-12-09 18:33:28.197628	postgres	\N	\N	\N
60	tb_usuario	D	{"id_us":14,"id_per":2,"id_est":2,"nombre_us":"franciso","cedula_us":"1234123412","correo_us":"f@gmail.com","clave_us":"1234567890","fecha_reg":"2025-12-01T18:46:03.040984","activo":true}	\N	2025-12-09 18:33:28.197628	postgres	\N	\N	\N
61	tb_usuario	D	{"id_us":15,"id_per":2,"id_est":2,"nombre_us":"w","cedula_us":"1234567895","correo_us":"n@g","clave_us":"112233445","fecha_reg":"2025-12-01T18:54:20.16053","activo":true}	\N	2025-12-09 18:33:28.197628	postgres	\N	\N	\N
62	tb_usuario	D	{"id_us":7,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1","correo_us":"nico.espin7@gmail.com","clave_us":"1","fecha_reg":"2025-12-01T15:34:25.297386","activo":true}	\N	2025-12-09 18:33:35.502182	postgres	\N	\N	\N
63	tb_usuario	D	{"id_us":11,"id_per":1,"id_est":1,"nombre_us":"G","cedula_us":"1812345671","correo_us":"e1@gmail.com","clave_us":"12345678","fecha_reg":"2025-12-01T15:51:35.367924","activo":true}	\N	2025-12-09 18:33:35.502182	postgres	\N	\N	\N
64	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 19:04:06.096697	nicole	\N	\N	\N
65	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-10 19:04:13.947469	nicole	\N	\N	\N
66	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 19:04:28.690786	nicole	\N	\N	\N
67	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-10 19:06:41.846913	nicole	\N	\N	\N
68	tb_usuario	U	{"id_us":1,"id_per":1,"id_est":1,"nombre_us":"Nicole","cedula_us":"0000000000","correo_us":"nicole@gmail.com","clave_us":"nicole","fecha_reg":"2025-11-29T03:00:51.277399","activo":true}	{"id_us":1,"id_per":1,"id_est":1,"nombre_us":"Nicole","cedula_us":"0000000000","correo_us":"nicole@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T03:00:51.277399","activo":true}	2025-12-10 19:06:53.861772	postgres	\N	\N	\N
69	mensajes_navidad	D	{"id":6,"nombre":"nicole","mensaje":"Bienvenidos","fecha":"2025-12-01T15:43:00.448981"}	\N	2025-12-10 19:07:53.722573	postgres	\N	\N	\N
70	mensajes_navidad	D	{"id":5,"nombre":"nicole","mensaje":"feliz navidad feliz navidad","fecha":"2025-11-30T23:48:41.675604"}	\N	2025-12-10 19:07:55.757144	postgres	\N	\N	\N
71	tb_usuario	U	{"id_us":3,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1234567890","correo_us":"e@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:08:53.874315","activo":true}	{"id_us":3,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1234567890","correo_us":"e@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:08:53.874315","activo":false}	2025-12-10 19:08:07.745592	postgres	\N	\N	\N
72	tb_usuario	U	{"id_us":3,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1234567890","correo_us":"e@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:08:53.874315","activo":false}	{"id_us":3,"id_per":2,"id_est":1,"nombre_us":"nicole","cedula_us":"1234567890","correo_us":"e@gmail.com","clave_us":"123456789","fecha_reg":"2025-11-29T08:08:53.874315","activo":true}	2025-12-10 19:08:11.459931	postgres	\N	\N	\N
73	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-10 19:08:56.006827	Nicole	\N	\N	\N
74	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 19:08:59.390245	nicole	\N	\N	\N
75	mensajes_navidad	I	\N	{"id":8,"nombre":"nicole","mensaje":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","fecha":"2025-12-10T19:15:53.167998"}	2025-12-10 19:15:53.167998	postgres	\N	\N	\N
76	mensajes_navidad	I	\N	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039"}	2025-12-10 20:15:24.745039	postgres	\N	\N	\N
77	mensajes_navidad	D	{"id":8,"nombre":"nicole","mensaje":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","fecha":"2025-12-10T19:15:53.167998"}	\N	2025-12-10 20:52:57.59246	postgres	\N	\N	\N
78	mensajes_navidad	U	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":false}	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":true}	2025-12-10 21:10:18.306735	postgres	\N	\N	\N
79	mensajes_navidad	U	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":true}	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":false}	2025-12-10 21:10:20.054016	postgres	\N	\N	\N
80	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-10 21:10:41.22055	Nicole	\N	\N	\N
81	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 21:10:43.47636	nicole	\N	\N	\N
82	mensajes_navidad	I	\N	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":false}	2025-12-10 21:10:48.50623	postgres	\N	\N	\N
83	mensajes_navidad	U	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":false}	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":true}	2025-12-10 21:11:24.977701	postgres	\N	\N	\N
84	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-10 21:11:59.769485	Nicole	\N	\N	\N
85	login	U	\N	{usuario:'null', accion:'logout'}	2025-12-10 21:12:02.427688	\N	\N	\N	\N
86	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 21:12:04.501724	nicole	\N	\N	\N
87	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-10 21:13:48.171212	nicole	\N	\N	\N
88	mensajes_navidad	U	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":false}	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":true}	2025-12-10 21:13:57.315341	postgres	\N	\N	\N
89	mensajes_navidad	U	{"id":7,"nombre":"nicole","mensaje":"Bienvenidos a todos","fecha":"2025-12-01T16:34:59.579046","aprobado":false}	{"id":7,"nombre":"nicole","mensaje":"Bienvenidos a todos","fecha":"2025-12-01T16:34:59.579046","aprobado":true}	2025-12-10 21:13:58.983622	postgres	\N	\N	\N
90	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-10 21:14:02.792295	Nicole	\N	\N	\N
91	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 21:14:04.463674	nicole	\N	\N	\N
92	login	U	\N	{usuario:'nicole', accion:'logout'}	2025-12-10 21:14:28.494919	nicole	\N	\N	\N
93	mensajes_navidad	U	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":true}	{"id":9,"nombre":"nicole","mensaje":"12112121212","fecha":"2025-12-10T20:15:24.745039","aprobado":false}	2025-12-10 21:14:37.796531	postgres	\N	\N	\N
94	mensajes_navidad	U	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":true}	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":false}	2025-12-10 21:14:40.490813	postgres	\N	\N	\N
95	mensajes_navidad	U	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":false}	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":true}	2025-12-10 21:14:42.116312	postgres	\N	\N	\N
96	mensajes_navidad	U	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":true}	{"id":10,"nombre":"nicole","mensaje":"s","fecha":"2025-12-10T21:10:48.50623","aprobado":false}	2025-12-10 21:14:42.692291	postgres	\N	\N	\N
97	login	U	\N	{usuario:'Nicole', accion:'logout'}	2025-12-10 21:14:48.521187	Nicole	\N	\N	\N
98	login	I	\N	{usuario:'nicole', accion:'login'}	2025-12-10 21:14:50.074318	nicole	\N	\N	\N
\.


--
-- TOC entry 4875 (class 0 OID 33101)
-- Dependencies: 220
-- Data for Name: mensajes_navidad; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.mensajes_navidad (id, nombre, mensaje, fecha, aprobado) FROM stdin;
4	nicole	Feliz navidad 2	2025-11-30 09:09:03.030007	f
7	nicole	Bienvenidos a todos	2025-12-01 16:34:59.579046	t
9	nicole	12112121212	2025-12-10 20:15:24.745039	f
10	nicole	s	2025-12-10 21:10:48.50623	f
\.


--
-- TOC entry 4877 (class 0 OID 33109)
-- Dependencies: 222
-- Data for Name: tb_estadocivil; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_estadocivil (id_est, descripcion_est) FROM stdin;
1	soltero
2	casado
3	divorciado
\.


--
-- TOC entry 4879 (class 0 OID 33113)
-- Dependencies: 224
-- Data for Name: tb_galeria; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_galeria (id_galeria, carrera, descripcion, imagen) FROM stdin;
1	Ingeniería en Software	Pesebre temático creado por Ingeniería en Software.	https://i.postimg.cc/Fk52VbQc/imagen.jpg
2	Ingeniería Civil	Pesebre elaborado con estructuras y maquetas.	https://i.postimg.cc/Fk52VbQc/imagen.jpg
3	Ingeniería Industrial	Pesebre hecho con materiales reciclados.	https://i.postimg.cc/Fk52VbQc/imagen.jpg
4	Ingeniería Electrónica	Pesebre iluminado con luces LED.	https://i.postimg.cc/Fk52VbQc/imagen.jpg
5	Ingeniería Ambiental	Pesebre ecológico con temática natural.	https://i.postimg.cc/Fk52VbQc/imagen.jpg
\.


--
-- TOC entry 4881 (class 0 OID 33119)
-- Dependencies: 226
-- Data for Name: tb_pagina; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_pagina (id_pag, descripcion_pag, path_pag) FROM stdin;
2	Personajes	http://localhost:8080/pesebreNavidad/personajes.jsp
3	Historia	http://localhost:8080/pesebreNavidad/historia.jsp
4	Tradiciones	http://localhost:8080/pesebreNavidad/tradiciones.jsp
5	Mensajes Navideños	http://localhost:8080/pesebreNavidad/mensajes.jsp
6	Administrar Usuarios	http://localhost:8080/pesebreNavidad/adminUsuarios.jsp
7	Bitácora	http://localhost:8080/pesebreNavidad/bitacora.jsp
8	Cerrar Sesión	http://localhost:8080/pesebreNavidad/cerrarSesion.jsp
1	Inicio	http://localhost:8080/pesebreNavidad/inicio.jsp
9	Pesebre en VR	http://localhost:8080/pesebreNavidad/juegoVR.jsp
\.


--
-- TOC entry 4883 (class 0 OID 33125)
-- Dependencies: 228
-- Data for Name: tb_perfil; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_perfil (id_per, descripcion_per) FROM stdin;
1	administrador
2	estudiante
3	invitado
\.


--
-- TOC entry 4885 (class 0 OID 33129)
-- Dependencies: 230
-- Data for Name: tb_perfilpagina; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_perfilpagina (id_perpag, id_per, id_pag) FROM stdin;
1	1	1
2	1	5
3	1	6
4	1	7
5	1	8
6	2	1
7	2	2
8	2	3
9	2	4
10	2	5
11	2	8
12	2	9
\.


--
-- TOC entry 4887 (class 0 OID 33133)
-- Dependencies: 232
-- Data for Name: tb_usuario; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_usuario (id_us, id_per, id_est, nombre_us, cedula_us, correo_us, clave_us, fecha_reg, activo) FROM stdin;
1	1	1	Nicole	0000000000	nicole@gmail.com	123456789	2025-11-29 03:00:51.277399	t
3	2	1	nicole	1234567890	e@gmail.com	123456789	2025-11-29 08:08:53.874315	t
\.


--
-- TOC entry 4889 (class 0 OID 33141)
-- Dependencies: 234
-- Data for Name: tb_voto; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tb_voto (id_voto, id_usuario, id_galeria, fecha_voto) FROM stdin;
\.


--
-- TOC entry 4905 (class 0 OID 0)
-- Dependencies: 219
-- Name: tb_auditoria_id_aud_seq; Type: SEQUENCE SET; Schema: auditoria; Owner: postgres
--

SELECT pg_catalog.setval('auditoria.tb_auditoria_id_aud_seq', 98, true);


--
-- TOC entry 4906 (class 0 OID 0)
-- Dependencies: 221
-- Name: mensajes_navidad_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.mensajes_navidad_id_seq', 10, true);


--
-- TOC entry 4907 (class 0 OID 0)
-- Dependencies: 223
-- Name: tb_estadocivil_id_est_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_estadocivil_id_est_seq', 3, true);


--
-- TOC entry 4908 (class 0 OID 0)
-- Dependencies: 225
-- Name: tb_galeria_id_galeria_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_galeria_id_galeria_seq', 5, true);


--
-- TOC entry 4909 (class 0 OID 0)
-- Dependencies: 227
-- Name: tb_pagina_id_pag_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_pagina_id_pag_seq', 9, true);


--
-- TOC entry 4910 (class 0 OID 0)
-- Dependencies: 229
-- Name: tb_perfil_id_per_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_perfil_id_per_seq', 3, true);


--
-- TOC entry 4911 (class 0 OID 0)
-- Dependencies: 231
-- Name: tb_perfilpagina_id_perpag_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_perfilpagina_id_perpag_seq', 12, true);


--
-- TOC entry 4912 (class 0 OID 0)
-- Dependencies: 233
-- Name: tb_usuario_id_us_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_usuario_id_us_seq', 15, true);


--
-- TOC entry 4913 (class 0 OID 0)
-- Dependencies: 235
-- Name: tb_voto_id_voto_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tb_voto_id_voto_seq', 1, false);


--
-- TOC entry 4699 (class 2606 OID 33156)
-- Name: tb_auditoria tb_auditoria_pkey; Type: CONSTRAINT; Schema: auditoria; Owner: postgres
--

ALTER TABLE ONLY auditoria.tb_auditoria
    ADD CONSTRAINT tb_auditoria_pkey PRIMARY KEY (id_aud);


--
-- TOC entry 4701 (class 2606 OID 33158)
-- Name: mensajes_navidad mensajes_navidad_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mensajes_navidad
    ADD CONSTRAINT mensajes_navidad_pkey PRIMARY KEY (id);


--
-- TOC entry 4703 (class 2606 OID 33160)
-- Name: tb_estadocivil tb_estadocivil_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_estadocivil
    ADD CONSTRAINT tb_estadocivil_pkey PRIMARY KEY (id_est);


--
-- TOC entry 4705 (class 2606 OID 33162)
-- Name: tb_galeria tb_galeria_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_galeria
    ADD CONSTRAINT tb_galeria_pkey PRIMARY KEY (id_galeria);


--
-- TOC entry 4707 (class 2606 OID 33164)
-- Name: tb_pagina tb_pagina_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_pagina
    ADD CONSTRAINT tb_pagina_pkey PRIMARY KEY (id_pag);


--
-- TOC entry 4709 (class 2606 OID 33166)
-- Name: tb_perfil tb_perfil_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_perfil
    ADD CONSTRAINT tb_perfil_pkey PRIMARY KEY (id_per);


--
-- TOC entry 4711 (class 2606 OID 33168)
-- Name: tb_perfilpagina tb_perfilpagina_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_perfilpagina
    ADD CONSTRAINT tb_perfilpagina_pkey PRIMARY KEY (id_perpag);


--
-- TOC entry 4713 (class 2606 OID 33170)
-- Name: tb_usuario tb_usuario_cedula_us_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_usuario
    ADD CONSTRAINT tb_usuario_cedula_us_key UNIQUE (cedula_us);


--
-- TOC entry 4715 (class 2606 OID 33172)
-- Name: tb_usuario tb_usuario_correo_us_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_usuario
    ADD CONSTRAINT tb_usuario_correo_us_key UNIQUE (correo_us);


--
-- TOC entry 4717 (class 2606 OID 33174)
-- Name: tb_usuario tb_usuario_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_usuario
    ADD CONSTRAINT tb_usuario_pkey PRIMARY KEY (id_us);


--
-- TOC entry 4719 (class 2606 OID 33176)
-- Name: tb_voto tb_voto_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_voto
    ADD CONSTRAINT tb_voto_pkey PRIMARY KEY (id_voto);


--
-- TOC entry 4726 (class 2620 OID 33177)
-- Name: mensajes_navidad mensajes_navidad_tg_audit; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER mensajes_navidad_tg_audit AFTER INSERT OR DELETE OR UPDATE ON public.mensajes_navidad FOR EACH ROW EXECUTE FUNCTION public.fn_log_audit();


--
-- TOC entry 4727 (class 2620 OID 33178)
-- Name: tb_usuario tb_usuario_tg_audit; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER tb_usuario_tg_audit AFTER INSERT OR DELETE OR UPDATE ON public.tb_usuario FOR EACH ROW EXECUTE FUNCTION public.fn_log_audit();


--
-- TOC entry 4722 (class 2606 OID 33179)
-- Name: tb_usuario fk_usuario_estadocivil; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_usuario
    ADD CONSTRAINT fk_usuario_estadocivil FOREIGN KEY (id_est) REFERENCES public.tb_estadocivil(id_est);


--
-- TOC entry 4723 (class 2606 OID 33184)
-- Name: tb_usuario fk_usuario_perfil; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_usuario
    ADD CONSTRAINT fk_usuario_perfil FOREIGN KEY (id_per) REFERENCES public.tb_perfil(id_per);


--
-- TOC entry 4720 (class 2606 OID 33189)
-- Name: tb_perfilpagina tb_perfilpagina_id_pag_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_perfilpagina
    ADD CONSTRAINT tb_perfilpagina_id_pag_fkey FOREIGN KEY (id_pag) REFERENCES public.tb_pagina(id_pag);


--
-- TOC entry 4721 (class 2606 OID 33194)
-- Name: tb_perfilpagina tb_perfilpagina_id_per_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_perfilpagina
    ADD CONSTRAINT tb_perfilpagina_id_per_fkey FOREIGN KEY (id_per) REFERENCES public.tb_perfil(id_per);


--
-- TOC entry 4724 (class 2606 OID 33199)
-- Name: tb_voto tb_voto_id_galeria_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_voto
    ADD CONSTRAINT tb_voto_id_galeria_fkey FOREIGN KEY (id_galeria) REFERENCES public.tb_galeria(id_galeria);


--
-- TOC entry 4725 (class 2606 OID 33204)
-- Name: tb_voto tb_voto_id_usuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tb_voto
    ADD CONSTRAINT tb_voto_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES public.tb_usuario(id_us);


-- Completed on 2025-12-11 19:15:24

--
-- PostgreSQL database dump complete
--

\unrestrict K5bKKmJmtQUQwPFwTFW29d2MjmDu6stg7XxeRotFb6cUAdBWyDCaMlbk2unlNWI

